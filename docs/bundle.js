(e=>{"use strict";function t(e=new URLSearchParams(location.search)){return[...e.entries()].reduce(((e,[t,r])=>(e[t]=r,e)),{})}e.ENDPOINT_ESI="https://esi.evetech.net/dev",e.THOUSAND=1e3,e.MILLION=1e6,e.BILLION=1e9,e.TRILLION=1e12,e.parseNumber=function(t){if(/[0-9., ]k$/i.test(t))return r()*e.THOUSAND;if(/[0-9., ]m$/i.test(t))return r()*e.MILLION;if(/[0-9., ]b$/i.test(t))return r()*e.BILLION;if(/[0-9., ]t$/i.test(t))return r()*e.TRILLION;return r();function r(){const e=t?.replace(/,/g,".").replace(/[^0-9.]/g,"");return parseFloat(parseFloat(e).toFixed(2))||void 0}},e.humaniseNumber=function(t=0,r){const u=Math.abs(t);if(u>=e.TRILLION)return`${(t/e.TRILLION).toFixed(2)} trillion ${r||""}`.trim();if(u>=e.BILLION)return`${(t/e.BILLION).toFixed(2)} billion ${r||""}`.trim();if(u>=e.MILLION)return`${(t/e.MILLION).toFixed(2)} million ${r||""}`.trim();if(u>=e.THOUSAND)return`${(t/e.THOUSAND).toFixed(2)} thousand ${r||""}`.trim();return`${t.toFixed(1)} ${r||""}`.trim()},window.addEventListener("DOMContentLoaded",(function(){const r={calculator:e.Calculator(t())};document.getElementById("View").replaceChildren(r.calculator.render())}),{once:!0,passive:!0})})(window.R={}),(e=>{"use strict";const t=document.getElementById("templateCalculator");e.Calculator=(r={})=>{const u=document.importNode(t.content,!0).firstChild,n={inputs:u.querySelectorAll("input"),route:u.querySelector(".Calculator-route"),quote:u.querySelector(".Calculator-quote")};return u.addEventListener("submit",(e=>{e.preventDefault()})),Array.from(n.inputs).forEach((e=>{e.addEventListener("focus",(()=>e.select()),{passive:!0}),e.addEventListener("keyup",(()=>o(function(e){return[...e.elements].reduce(((e,t)=>t?.name?(e[t.name]=t.value,e):e),{})}(u))),{passive:!0})})),o(r),{prepareQuote:o,render:function(){return u}};function o(t={}){const r={volume:e.parseNumber(t.volume)||0,collateral:e.parseNumber(t.collateral)||0,jumps:e.parseNumber(t.jumps)||0,jumpsLowsec:e.parseNumber(t.jumpsLowsec)||0,jumpsNullsec:e.parseNumber(t.jumpsNullsec)||0};console.log("prepareQuote",{params:t,haul:r}),Object.entries(t).forEach((([e,t])=>{u[e].value=t})),n.quote.textContent=e.humaniseNumber(function({volume:e,collateral:t,jumps:r,jumpsLowsec:u,jumpsNullsec:n}){const o={volume:e||0,collateral:t||0,jumps:r||0,jumpsLowsec:u||0,jumpsNullsec:n||0},s=function({volume:e}){return 1e5+e/Math.sqrt(e)*1e3||0}(o),l=function({volume:e,collateral:t}){return Math.sqrt(.001*e+Math.sqrt(.001*t))||0}(o),a=function({jumps:e,jumpsLowsec:t,jumpsNullsec:r}){const u=.5*(e-t-r),n=1.5*t,o=3*r;return Math.sqrt(e)*((u+n+o)/e)||0}(o);return s*l*a}(r),"ISK")}}})(window.R);
